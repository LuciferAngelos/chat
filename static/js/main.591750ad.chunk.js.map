{"version":3,"sources":["components/socket/constants.js","utils/Context.js","components/redux/appReducer.js","components/redux/usersReducer.js","components/common/navbar/WSTransferTest.js","components/common/navbar/NavBar.js","components/common/microphone/Microphone.js","components/redux/store.js","assets/src/preloader/preloader.gif","components/common/preloader/Preloader.js","utils/routes.js","components/common/screenCapture/ScreenCapture.js","components/common/chatRooms/chatBar.js","components/common/main/Main.js","components/socket/getWayConnect.js","App.js","reportWebVitals.js","index.js"],"names":["mainRoot","getWayWebSocket","WSSSContext","createContext","INITIALIZED_SUCCESS","TOKEN_USER_UUID_GOTTEN","ON_LINK_GOTTEN","ON_DIALOG","GET_OUTPUT_PLAYER_VOICE_FROM_CLIENT","GET_OUTPUT_PLAYER_VOICE_FROM_SERVER","initialState","initialized","linkIsFetched","sessionToken","userUUID","linkForSS","type","onDialog","outputPlayerVoiceFromClient","outputPlayerVoiceFromSS","setSessionUserUUID","payload","setLinkForSS","link","GET_CURRENT_USERS_LIST","USER_JOINED","USER_LEFT","users","self","WSTransferTest","socket","console","log","onClick","close","useStyles","makeStyles","theme","root","flexGrow","menuButton","marginRight","spacing","title","style","position","top","right","width","maxHeight","bgcolor","boxShadow","p","border","overflow","readPlayerFromPlayerList","buffer","startOffset","hasPosition","userUUIDLen","uuid","offset","readUtf8String","id","readUInt32LE","x","y","z","readFloatLE","state","readUInt8","NavBar","getUsersFromStore","classes","useState","openModal","setOpenModal","connected","setConnected","dispatch","useDispatch","useContext","getConnectionType","sessionTokenForSS","userUUIDForSS","webSocketSS","getUUIDFromGetWay","useSelector","app","setUsers","webSocket","useRef","useEffect","start","linkSS","WebSocket","current","window","binaryType","onopen","Axios","get","then","res","sessionUUID","data","response","session_uuid","array","Uint8Array","methodBuffer","Uint32Array","sessionBuffer","TextEncoder","encode","locationUUIDBuffer","set","send","readyState","onmessage","message","BufferStream","method","readInt32LE","countPlayers","index","user","push","setUsersFromList","JSON","stringify","setUserJoined","userUuid","user_from_voice","blobForPlay","outputBlob","Blob","fileReader","FileReader","readAsDataURL","onloadend","base64String","result","audio","Audio","addEventListener","play","outputPlayerVoice","onclose","e","code","setTimeout","onerror","err","sendPlayerTick","audioChunk","voiceBody","byteLength","Float32Array","useMemo","className","AppBar","Toolbar","IconButton","edge","color","Typography","variant","Button","Modal","open","onClose","closeAfterTransition","BackdropComponent","Backdrop","BackdropProps","timeout","Fade","in","Box","sx","component","length","map","u","mt","icon","height","reactmic","flex","Microphone","size","record","setRecord","stopRecord","setStopRecord","navigator","mediaDevices","getUserMedia","stream","mediaRecorder","MediaRecorder","audioChunks","getAudioTracks","str","event","mimeType","arrayBuffer","audioBuffer","stop","startRecording","totallyStop","forEach","track","Grid","container","justifyContent","item","Card","visualSetting","echoCancellation","noiseSuppression","onStop","onData","recordedBlob","strokeColor","backgroundColor","DialogActions","xs","red","reducers","combineReducers","action","voice","filter","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleware","__store__","Preloader","routesTechPractices","routesStands","ScreenCapture","React","props","ref","autoPlay","roomsTechPracticeNames","displayMediaOptions","video","cursor","ChatBar","setOpen","openSt","setOpenSt","screenCaptureRef","createRef","srcLink","a","videoTracks","getDisplayMedia","srcObject","error","display","CssBaseline","Drawer","flexShrink","marginTop","boxSizing","List","ListItemButton","ListItemIcon","ListItemText","primary","Collapse","unmountOnExit","text","to","textDecoration","activeClassName","exact","ListItem","button","pl","Divider","flexDirection","m","maxWidth","disablePadding","margin","marginLeft","marginBottom","getTracks","Main","lobbyUUID","setLobbyUUID","handleConnectToGetWay","useCallback","connectionType","newWS","connect","token","dataFromGetWay","parse","undefined","user_uuid","lobby_uuid","ip","port","getWayConnection","handleGetLobbyUUID","target","value","Stack","direction","Input","onChange","App","setLoaded","contextWSSS","setContextWSSS","Provider","textAlign","path","render","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.591750ad.chunk.js","sourcesContent":["//variable for main root because of GHP deploy. \r\n//Probably needs to be switched to '/'\r\nexport const mainRoot = '/chat'\r\n\r\nexport const getWayWebSocket = \"wss://getway.dev.viexpo.ru:8010\";\r\n\r\n\r\nexport const CONST_X_VIEXPO_INTERNAL_TOKEN = 'x-viexpo-internal-token-test'\r\nexport const CONST_X_VIEXPO_SESSION_TOKEN_BODY = 'x-viexpo-session-token'\r\n\r\nexport const ToGetway_FromUnknown_AuthSocket = 0;\r\nexport const FromGetway_AuthSocket_Response = 1;\r\nexport const ToGetway_FromInternal_GetUser = 2;\r\nexport const ToGetway_FromInternal_GetUserFromSession = 3;\r\nexport const FromGetway_ToInternal_GetUserResponse = 4;\r\nexport const ToGetway_FromPlayer_GetMovementServer = 5;\r\nexport const FromGetway_FromPlayer_GetMovementServerResponse = 6;\r\nexport const ToGetway_FromPlayer_GetSoundServer = 7;\r\nexport const FromGetway_FromPlayer_GetSoundServerResponse = 8;\r\n\r\n\r\nexport const ToMovement_ToPlayerScene_PlayerTick = 9991;\r\nexport const FromMovement_FromPlayerScene_PlayerJoin = 9992;\r\nexport const FromMovement_FromPlayerScene_PlayerLeave = 9993;\r\nexport const FromMovement_FromPlayerScene_PlayerList = 9994;\r\nexport const FromMovement_FromPlayerScene_PlayerPosition = 9995;\r\nexport const FromSound_FromPlayerScene_PlayerVoice = 9996;\r\n\r\nexport const timeInterval = 1000;\r\n\r\n","import React, { createContext } from \"react\";\r\n\r\nexport const WSSSContext = createContext();","const INITIALIZED_SUCCESS = 'INITIALIZED_SUCCESS';\r\nconst TOKEN_USER_UUID_GOTTEN = 'TOKEN_USER_UUID_GOTTEN';\r\nconst ON_LINK_GOTTEN = 'ON_LINK_GOTTEN';\r\nconst ON_DIALOG = 'ON_DIALOG'\r\nconst GET_OUTPUT_PLAYER_VOICE_FROM_CLIENT = 'GET_OUTPUT_PLAYER_VOICE_FROM_CLIENT';\r\nconst GET_OUTPUT_PLAYER_VOICE_FROM_SERVER = 'GET_OUTPUT_PLAYER_VOICE_FROM_SERVER';\r\n\r\n\r\nlet initialState = {\r\n\tinitialized: false,\r\n\tlinkIsFetched: false,\r\n\tsessionToken: '',\r\n\tuserUUID: '',\r\n\tlinkForSS: '',\r\n\ttype: 1,\r\n\tonDialog: false,\r\n\toutputPlayerVoiceFromClient: null,\r\n\toutputPlayerVoiceFromSS: null\r\n}\r\n\r\nexport const appReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase INITIALIZED_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tinitialized: true\r\n\t\t\t};\r\n\t\tcase TOKEN_USER_UUID_GOTTEN:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t...action.payload\r\n\t\t\t};\r\n\t\tcase ON_DIALOG:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tonDialog: !state.onDialog\r\n\t\t\t}\r\n\t\tcase GET_OUTPUT_PLAYER_VOICE_FROM_CLIENT:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\toutputPlayerVoiceFromClient: action.voice\r\n\t\t\t}\r\n\t\tcase GET_OUTPUT_PLAYER_VOICE_FROM_SERVER:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\toutputPlayerVoiceFromSS: action.voice\r\n\t\t\t}\r\n\t\tcase ON_LINK_GOTTEN:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tlinkIsFetched: true,\r\n\t\t\t\tlinkForSS: action.link,\r\n\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\n//AC\r\n// export const setInitializedSuccess = () => ({ type: INITIALIZED_SUCCESSED });\r\nexport const setSessionUserUUID = (sessionToken, userUUID) => ({ type: TOKEN_USER_UUID_GOTTEN, payload: { sessionToken, userUUID } })\r\nexport const setLinkForSS = (link) => ({ type: ON_LINK_GOTTEN, link })\r\nexport const toggleOnDialog = () => ({ type: ON_DIALOG })\r\nexport const setOutputPlayerVoiceFromClient = (voice) => ({ type: GET_OUTPUT_PLAYER_VOICE_FROM_CLIENT, voice })\r\nexport const setOutputPlayerVoiceFromSS = (voice) => ({ type: GET_OUTPUT_PLAYER_VOICE_FROM_SERVER, voice })\r\n\r\n//thunk\r\n// export const getOutputPlayerVoiceFromClient = (voice) => {\r\n// \treturn async (dispatch) => {\r\n// \t\tdispatch(toggleOnDialog());\r\n// \t\tdebugger\r\n// \t\tawait dispatch(setOutputPlayerVoiceFromClient(voice));\r\n// \t\tdispatch(toggleOnDialog());\r\n// \t\tdispatch(setOutputPlayerVoiceFromClient(null));\r\n\r\n// \t}\r\n// }","const GET_CURRENT_USERS_LIST = 'GET_CURRENT_USERS_LIST';\r\nconst USER_JOINED = 'USER_JOINED';\r\nconst USER_LEFT = 'USER_LEFT';\r\n\r\nconst initialState = {\r\n\tusers: [],\r\n\tself: ''\r\n}\r\n\r\nexport const usersReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase GET_CURRENT_USERS_LIST:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tusers: action.users\r\n\t\t\t};\r\n\t\tcase USER_JOINED:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tusers: [...state.users, action.user]\r\n\t\t\t};\r\n\t\tcase USER_LEFT:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tusers: state.users.filter(u => u.uuid != action.userUuid)\r\n\t\t\t};\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\n//ac\r\n\r\nexport const setUsersFromList = users => ({ type: GET_CURRENT_USERS_LIST, users })\r\nexport const setUserJoined = user => ({ type: USER_JOINED, user })\r\nexport const setUserLeft = userUuid => ({ type: USER_LEFT, userUuid })","import react from 'react'\r\n\r\nexport const WSTransferTest = ({ socket }) => {\r\n\tconsole.log('this is the socket => ', socket);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\tsdfsdf\r\n\t\t\t<button onClick={() => socket.close()}>close</button>\r\n\t\t</div>\r\n\t)\r\n}","import Axios from 'axios'\r\nimport { BufferStream } from \"buffer-stream-js\";\r\nimport React, { useCallback, useContext, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport MenuIcon from \"@mui/icons-material/Menu\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport Backdrop from '@mui/material/Backdrop';\r\nimport Box from '@mui/material/Box';\r\nimport Modal from '@mui/material/Modal';\r\nimport Fade from '@mui/material/Fade';\r\n\r\nimport {\r\n\tToGetway_FromUnknown_AuthSocket,\r\n\tToMovement_ToPlayerScene_PlayerTick,\r\n\tFromMovement_FromPlayerScene_PlayerJoin,\r\n\tFromMovement_FromPlayerScene_PlayerLeave,\r\n\tFromMovement_FromPlayerScene_PlayerList,\r\n\tFromSound_FromPlayerScene_PlayerVoice\r\n} from \"../../socket/constants.js\";\r\nimport { WSSSContext } from \"../../../utils/Context\";\r\nimport { setOutputPlayerVoiceFromClient, setOutputPlayerVoiceFromSS } from \"../../redux/appReducer\";\r\nimport { setUserLeft, setUserJoined, setUsersFromList } from '../../redux/usersReducer.js';\r\nimport { WSTransferTest } from './WSTransferTest.js';\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: {\r\n\t\tflexGrow: 1\r\n\t},\r\n\tmenuButton: {\r\n\t\tmarginRight: theme.spacing(2)\r\n\t},\r\n\ttitle: {\r\n\t\tflexGrow: 1\r\n\t},\r\n}));\r\nconst style = {\r\n\tposition: 'absolute',\r\n\ttop: '6%',\r\n\tright: '10%',\r\n\twidth: 400,\r\n\tmaxHeight: '70vh',\r\n\tbgcolor: 'background.paper',\r\n\tboxShadow: 24,\r\n\tp: 4,\r\n\tborder: '1px solid grey',\r\n\toverflow: 'auto'\r\n};\r\n\r\nfunction isWSOpen(ws) {\r\n\treturn ws.readyState === 1\r\n}\r\n\r\nconst readPlayerFromPlayerList = (\r\n\tbuffer,\r\n\tstartOffset,\r\n\thasPosition = false\r\n) => {\r\n\tconst userUUIDLen = hasPosition === true ? 0 : 36;\r\n\r\n\tlet uuid = \"\";\r\n\tif (hasPosition === false) {\r\n\t\tbuffer.offset = startOffset;\r\n\t\tuuid = buffer.readUtf8String(userUUIDLen);\r\n\t}\r\n\tbuffer.offset = startOffset + userUUIDLen + 0;\r\n\tconst id = buffer.readUInt32LE();\r\n\r\n\tconst position = {\r\n\t\tx: 0,\r\n\t\ty: 0,\r\n\t\tz: 0,\r\n\t};\r\n\r\n\tbuffer.offset = startOffset + userUUIDLen + 4 + 0;\r\n\tposition.x = buffer.readFloatLE();\r\n\r\n\tbuffer.offset = startOffset + userUUIDLen + 4 + 4;\r\n\tposition.y = buffer.readFloatLE();\r\n\r\n\tbuffer.offset = startOffset + userUUIDLen + 4 + 8;\r\n\tposition.z = buffer.readFloatLE();\r\n\r\n\tbuffer.offset = startOffset + userUUIDLen + 4 + 12;\r\n\tconst state = buffer.readUInt8();\r\n\r\n\treturn {\r\n\t\tuuid: uuid,\r\n\t\tid: id,\r\n\t\tposition: position,\r\n\t\tstate: state\r\n\t};\r\n};\r\n\r\n// function Video(src, append) {\r\n// \tvar v = document.createElement(\"video\");\r\n// \tif (src != \"\") {\r\n// \t\tv.src = src;\r\n// \t}\r\n// \tif (append == true) {\r\n// \t\tdocument.body.appendChild(v);\r\n// \t}\r\n// \treturn v;\r\n// }\r\n\r\n// You can then use it like this:\r\n\r\n// var video = new Video(\"YOUR_VIDEO_URL\", true);\r\n// // do whatever you want...\r\n// video.height = 280;\r\n// video.width = 500;\r\n// video.controls = \"controls\";\r\n// video.play();\r\n\r\n\r\nlet outputPlayerVoice = blobForPlay => {\r\n\tconst outputBlob = new Blob([blobForPlay], {\r\n\t\ttype: \"audio/webm;codecs=opus\",\r\n\t});\r\n\r\n\tconst fileReader = new FileReader();\r\n\tfileReader.readAsDataURL(outputBlob);\r\n\tfileReader.onloadend = () => {\r\n\t\tconst base64String = fileReader.result;\r\n\t\tconst audio = new Audio(base64String);\r\n\t\taudio.addEventListener('canplaythrough', () => {\r\n\t\t\taudio.play();\r\n\t\t})\r\n\t};\r\n}\r\n\r\nexport const NavBar = ({ getUsersFromStore }) => {\r\n\tconst classes = useStyles();\r\n\r\n\tconst [openModal, setOpenModal] = useState(false);\r\n\tconst handleOpen = () => setOpenModal(true);\r\n\tconst handleClose = () => setOpenModal(false);\r\n\r\n\tconst [connected, setConnected] = useState(false);\r\n\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst { linkForSS, sessionTokenForSS, userUUIDForSS, getConnectionType } = useContext(WSSSContext)\r\n\r\n\tlet webSocketSS = null;\r\n\r\n\t//get self uuid\r\n\tconst getUUIDFromGetWay = useSelector(state => state.app.userUUID)\r\n\r\n\tconst [users, setUsers] = useState([])\r\n\r\n\t//ref for ws\r\n\tconst webSocket = useRef(null)\r\n\r\n\tuseEffect(() => {\r\n\r\n\r\n\t\tif (linkForSS) start();\r\n\r\n\t\tfunction start() {\r\n\r\n\t\t\tconst linkSS = linkForSS ? linkForSS : console.log('Fetching the link...');\r\n\r\n\t\t\twebSocketSS = new WebSocket(linkSS);\r\n\t\t\twebSocket.current = webSocketSS;\r\n\t\t\twindow.webSocketSS = webSocketSS;\r\n\t\t\twebSocketSS.binaryType = \"arraybuffer\";\r\n\r\n\r\n\r\n\t\t\t// webSocketSS.onopen = () => {\r\n\t\t\t// \tconsole.log('Sound Server WebSocket is connected and its state is ' + webSocketSS.readyState);\r\n\t\t\t// \tconsole.log('Websocket open status is => ', opened);\r\n\r\n\t\t\t// \tconst array = new Uint8Array(4 + 36 + 1 + 36);\r\n\r\n\t\t\t// \tconst methodBuffer = new Uint8Array(\r\n\t\t\t// \t\tnew Uint32Array([ToGetway_FromUnknown_AuthSocket]).buffer\r\n\t\t\t// \t);\r\n\t\t\t// \tconst sessionBuffer = new TextEncoder().encode(\r\n\t\t\t// \t\tsessionTokenForSS\r\n\t\t\t// \t);\r\n\t\t\t// \tconst authType = new Uint8Array(\r\n\t\t\t// \t\tnew Uint32Array(1).buffer\r\n\t\t\t// \t);\r\n\t\t\t// \tconst targetUUID = new TextEncoder().encode(\r\n\t\t\t// \t\tuserUUIDForSS\r\n\t\t\t// \t);\r\n\r\n\t\t\t// \tarray.set(methodBuffer, 0);\r\n\t\t\t// \tarray.set(sessionBuffer, 4);\r\n\t\t\t// \tarray.set(authType, 40);\r\n\t\t\t// \tarray.set(targetUUID, 41);\r\n\r\n\t\t\t// \tif (!isWSOpen(webSocketSS)) return\r\n\t\t\t// \twebSocketSS.send(array);\r\n\t\t\t// };\r\n\r\n\r\n\t\t\twebSocketSS.onopen = () => {\r\n\r\n\t\t\t\tAxios.get('https://getway.dev.viexpo.ru/api/account/fake/get').then((res) => {\r\n\t\t\t\t\tconst sessionUUID = res.data.response.session_uuid\r\n\t\t\t\t\tconst array = new Uint8Array(4 + 36 + 1 + 36)\r\n\r\n\t\t\t\t\tconst methodBuffer = new Uint8Array(new Uint32Array([ToGetway_FromUnknown_AuthSocket]).buffer)\r\n\t\t\t\t\tconst sessionBuffer = new TextEncoder().encode(sessionUUID)\r\n\t\t\t\t\tconst locationUUIDBuffer = new TextEncoder().encode(\"123456789012345678901234567890123456\") // 36 LEN\r\n\r\n\t\t\t\t\tarray.set(methodBuffer, 0)\r\n\t\t\t\t\tarray.set(sessionBuffer, 4)\r\n\t\t\t\t\tarray.set(new Uint8Array([getConnectionType]), 4 + 36)\r\n\t\t\t\t\tarray.set(locationUUIDBuffer, 4 + 36 + 1)\r\n\r\n\t\t\t\t\twebSocketSS.send(array);\r\n\r\n\t\t\t\t\tif (webSocketSS.readyState === 1) {\r\n\t\t\t\t\t\tsetConnected(true)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t};\r\n\r\n\r\n\t\t\twebSocketSS.onmessage = buffer => {\r\n\r\n\t\t\t\tconst message = new BufferStream(buffer.data);\r\n\t\t\t\tmessage.offset = 0;\r\n\t\t\t\tconst method = message.readInt32LE();\r\n\t\t\t\tswitch (method) {\r\n\t\t\t\t\tcase FromMovement_FromPlayerScene_PlayerList:\r\n\t\t\t\t\t\tmessage.offset = 4;\r\n\t\t\t\t\t\tconst countPlayers = message.readUInt32LE();\r\n\r\n\t\t\t\t\t\tconst users = [];\r\n\t\t\t\t\t\tfor (let index = 0; index < countPlayers; index++) {\r\n\t\t\t\t\t\t\tconst user = readPlayerFromPlayerList(\r\n\t\t\t\t\t\t\t\tmessage,\r\n\t\t\t\t\t\t\t\t4 /* Method */ +\r\n\t\t\t\t\t\t\t\t4 /* Count */ +\r\n\t\t\t\t\t\t\t\tindex *\r\n\t\t\t\t\t\t\t\t(36 /* UUID */ +\r\n\t\t\t\t\t\t\t\t\t4 /* ID */ +\r\n\t\t\t\t\t\t\t\t\t(4 + 4 + 4) /* Position */ +\r\n\t\t\t\t\t\t\t\t\t1) /* Flags */\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\tif (user.uuid === getUUIDFromGetWay) {\r\n\t\t\t\t\t\t\t\tconsole.log('the uuid is the same');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tusers.push(user);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tdispatch(setUsersFromList(users))\r\n\r\n\t\t\t\t\t\tconsole.log(JSON.stringify(users));\r\n\r\n\t\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\t\"Method: FromMovement_FromPlayerScene_PlayerList, count: \" +\r\n\t\t\t\t\t\t\tcountPlayers,\r\n\t\t\t\t\t\t\tusers\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase FromMovement_FromPlayerScene_PlayerJoin:\r\n\r\n\t\t\t\t\t\tconsole.log('the message => ', message);\r\n\r\n\t\t\t\t\t\tconst user = readPlayerFromPlayerList(message, 4);\r\n\t\t\t\t\t\tconsole.log(\"User Join: \" + user.uuid);\r\n\t\t\t\t\t\tdispatch(setUserJoined(user))\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase FromMovement_FromPlayerScene_PlayerLeave:\r\n\t\t\t\t\t\tmessage.offset = 4;\r\n\t\t\t\t\t\tconst uuid = message.readUtf8String(36);\r\n\t\t\t\t\t\tconsole.log(\"User Leave: \" + uuid);\r\n\t\t\t\t\t\tdispatch(setUserLeft(uuid))\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase FromSound_FromPlayerScene_PlayerVoice:\r\n\t\t\t\t\t\tconst user_from_voice = readPlayerFromPlayerList(message, 4, true);\r\n\t\t\t\t\t\t// Parse Voice Body\r\n\t\t\t\t\t\tconst voiceBody = new Uint8Array(message.buffer.buffer, 21);\r\n\t\t\t\t\t\t// Play Voice Body\r\n\t\t\t\t\t\toutputPlayerVoice(voiceBody);\r\n\t\t\t\t\t\t// dispatch(setOutputPlayerVoiceFromSS(voiceBody))\r\n\t\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\t\"FromSound_FromPlayerScene_PlayerVoice => \",\r\n\t\t\t\t\t\t\tuser_from_voice\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tconsole.log(\"Method: Unknown\");\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconsole.log(\"WebSocket message received:\", method);\r\n\r\n\t\t\t};\r\n\r\n\t\t\twebSocketSS.onclose = (e) => {\r\n\t\t\t\tconsole.log('Sound Server Socket closed. Trying to reconnect...');\r\n\t\t\t\tconsole.log('Server closed with code => ', e.code);\r\n\r\n\t\t\t\tif (webSocketSS.readyState !== 1) {\r\n\t\t\t\t\tsetConnected(false)\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tstart()\r\n\t\t\t\t\tconsole.log(webSocketSS.readyState);\r\n\t\t\t\t}, 1000);\r\n\r\n\t\t\t}\r\n\r\n\t\t\twebSocketSS.onerror = (err) => {\r\n\t\t\t\tconsole.log('This error happened => ', err);\r\n\t\t\t\twebSocketSS.close()\r\n\t\t\t}\r\n\r\n\t\t\tlet sendPlayerTick = (\r\n\t\t\t\tposition,\r\n\t\t\t\tstate,\r\n\t\t\t\tvoiceBody\r\n\t\t\t) => {\r\n\r\n\t\t\t\tconsole.log('the voice body is ', position,\r\n\t\t\t\t\tstate,\r\n\t\t\t\t\tvoiceBody);\r\n\r\n\t\t\t\tconst array = new Uint8Array(4 + 12 + 1 + voiceBody.byteLength);\r\n\r\n\t\t\t\tconst methodBuffer = new Uint8Array(new Uint32Array([ToMovement_ToPlayerScene_PlayerTick]).buffer\r\n\t\t\t\t);\r\n\r\n\t\t\t\tarray.set(methodBuffer, 0); // before 0, after 4\r\n\r\n\t\t\t\tarray.set(new Uint8Array(new Float32Array([position.x]).buffer), 4); // before 4, after 8\r\n\t\t\t\tarray.set(new Uint8Array(new Float32Array([position.y]).buffer), 4 + 4); // before 8, after 12\r\n\t\t\t\tarray.set(new Uint8Array(new Float32Array([position.z]).buffer), 4 + 8); // before 12, after 16\r\n\r\n\t\t\t\tarray.set(new Uint8Array([state]), 4 + 12); // before 16, after 17\r\n\r\n\t\t\t\tarray.set(voiceBody, 4 + 12 + 1); // before 17, after 4\r\n\r\n\t\t\t\tif (!isWSOpen(webSocketSS)) return\r\n\t\t\t\twebSocketSS.send(array)\r\n\t\t\t};\r\n\r\n\t\t\twindow.sendPlayerTick = audioChunk => sendPlayerTick({ x: 0, y: 0, z: 0 }, 0, audioChunk)\r\n\t\t}\r\n\r\n\t\treturn () => {\r\n\t\t\tif (!webSocket.current && !linkForSS) {\r\n\t\t\t\treturn\r\n\t\t\t} else {\r\n\t\t\t\twebSocket.current.close();\r\n\t\t\t\twebSocket.current = null;\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}, [linkForSS]);\r\n\r\n\tuseMemo(() => {\r\n\t\tsetUsers(getUsersFromStore)\r\n\t\tconsole.log(users);\r\n\t}, [getUsersFromStore, users])\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<AppBar position=\"static\">\r\n\t\t\t\t<Toolbar>\r\n\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\tedge=\"start\"\r\n\t\t\t\t\t\tclassName={classes.menuButton}\r\n\t\t\t\t\t\tcolor=\"inherit\"\r\n\t\t\t\t\t\taria-label=\"menu\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<MenuIcon />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t<WSTransferTest socket={webSocket.current} />\r\n\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\tConnection Status:\r\n\t\t\t\t\t\t{connected ? ' Connected!' : ' Disconnected!'}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t<Button color=\"inherit\" onClick={handleOpen}>Users List</Button>\r\n\t\t\t\t\t<Modal\r\n\t\t\t\t\t\taria-labelledby=\"transition-modal-title\"\r\n\t\t\t\t\t\taria-describedby=\"transition-modal-description\"\r\n\t\t\t\t\t\topen={openModal}\r\n\t\t\t\t\t\tonClose={handleClose}\r\n\t\t\t\t\t\tcloseAfterTransition\r\n\t\t\t\t\t\tBackdropComponent={Backdrop}\r\n\t\t\t\t\t\tBackdropProps={{\r\n\t\t\t\t\t\t\ttimeout: 500,\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Fade in={openModal}>\r\n\t\t\t\t\t\t\t<Box sx={style}>\r\n\t\t\t\t\t\t\t\t<Typography id=\"transition-modal-title\" variant=\"h6\" component=\"h2\">\r\n\t\t\t\t\t\t\t\t\tUsers connected:\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tgetUsersFromStore.length !== 0 ? getUsersFromStore.map(u =>\r\n\t\t\t\t\t\t\t\t\t\t<Typography id=\"transition-modal-description\" sx={{ mt: 2 }} key={u.id}>\r\n\t\t\t\t\t\t\t\t\t\t\tUser's UUID: <span style={{ color: 'blue' }}>{u.uuid}</span>\r\n\t\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t\t\t(<Typography id=\"transition-modal-description\" sx={{ mt: 2 }}>\r\n\t\t\t\t\t\t\t\t\t\t\tWaiting for users\r\n\t\t\t\t\t\t\t\t\t\t</Typography>)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Fade>\r\n\t\t\t\t\t</Modal>\r\n\t\t\t\t</Toolbar>\r\n\t\t\t</AppBar>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useState, useRef, useEffect, useMemo, useCallback } from \"react\";\r\nimport { ReactMic } from \"react-mic\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport MicIcon from \"@mui/icons-material/Mic\";\r\nimport MicOffIcon from '@mui/icons-material/MicOff';\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport StopIcon from \"@mui/icons-material/Stop\";\r\nimport FiberManualRecordIcon from \"@mui/icons-material/FiberManualRecord\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport { green, red, blue } from \"@material-ui/core/colors\";\r\n\r\nimport \"./microphone.css\";\r\nimport { Card } from \"@material-ui/core\";\r\nimport { sendPlayerTick } from \"../../socket/serverConnection\";\r\nimport { setOutputPlayerVoiceFromClient, toggleOnDialog } from \"../../redux/appReducer\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\ticon: {\r\n\t\theight: 38,\r\n\t\twidth: 38\r\n\t},\r\n\treactmic: {\r\n\t\twidth: \"80%\",\r\n\t\theight: 30\r\n\t},\r\n\tflex: {\r\n\t\tflex: 1\r\n\t}\r\n}));\r\n\r\nexport default function Microphone({ size }) {\r\n\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst [record, setRecord] = useState(false);\r\n\tconst [open, setOpen] = useState(false);\r\n\tconst [stopRecord, setStopRecord] = useState(true)\r\n\t// const [audioChunks, setAudioChunks] = useState([]);\r\n\r\n\tlet audioChunks = [];\r\n\r\n\tconst [playerReady, setPlayerReady] = useState(false);\r\n\tconst [isPlaying, setIsPlaying] = useState(false);\r\n\tconst wavesurfer = useRef(null);\r\n\r\n\r\n\tuseEffect(() => {\r\n\t\tif (stopRecord) return\r\n\r\n\t\tnavigator.mediaDevices.getUserMedia({ audio: true }).then((stream) => {\r\n\t\t\tconst mediaRecorder = new window.MediaRecorder(stream);\r\n\t\t\tlet audioChunks = [];\r\n\t\t\tconsole.log(stream.getAudioTracks());\r\n\t\t\tmediaRecorder.start();\r\n\t\t\twindow.str = stream\r\n\r\n\t\t\tmediaRecorder.addEventListener(\r\n\t\t\t\t\"dataavailable\",\r\n\t\t\t\t(event) => {\r\n\t\t\t\t\taudioChunks.push(event.data);\r\n\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tmediaRecorder.addEventListener(\"stop\", () => {\r\n\r\n\t\t\t\tif (audioChunks.length > 0) {\r\n\r\n\t\t\t\t\tconst mimeType = audioChunks[0].type;\r\n\t\t\t\t\tconst audioBlob = new Blob(audioChunks, { type: mimeType });\r\n\r\n\t\t\t\t\taudioBlob.arrayBuffer().then((arrayBuffer) => {\r\n\t\t\t\t\t\tconst audioBuffer = new Uint8Array(arrayBuffer);\r\n\r\n\t\t\t\t\t\twindow.sendPlayerTick(audioBuffer);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\taudioChunks = [];\r\n\r\n\t\t\t\tif (window.str !== null) {\r\n\t\t\t\t\tmediaRecorder.start();\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tif (mediaRecorder.state !== 'inactive') {\r\n\t\t\t\t\t\t\tmediaRecorder.stop();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, 1000);\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tif (mediaRecorder.state !== 'inactive') {\r\n\t\t\t\t\tmediaRecorder.stop();\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t}, 1000);\r\n\r\n\t\t});\r\n\r\n\t}, [record, stopRecord])\r\n\r\n\tconst continueRecording = () => {\r\n\t\tsetRecord(true);\r\n\r\n\r\n\t};\r\n\r\n\r\n\tconst startRecording = () => {\r\n\t\tsetRecord(true)\r\n\t\tsetStopRecord(false)\r\n\t};\r\n\r\n\tconst stopRecording = () => {\r\n\t\tsetRecord(false);\r\n\r\n\t\t// console.log(btnIsClicked, record, ' on stop');\r\n\t};\r\n\tfunction stopStream() {\r\n\t\tif (!window.streamReference) return;\r\n\r\n\t\twindow.streamReference.getAudioTracks().forEach(function (track) {\r\n\t\t\ttrack.stop();\r\n\t\t});\r\n\r\n\t\twindow.streamReference.getVideoTracks().forEach(function (track) {\r\n\t\t\ttrack.stop();\r\n\t\t});\r\n\r\n\t\twindow.streamReference = null;\r\n\t}\r\n\tconst totallyStop = () => {\r\n\t\tsetRecord(false);\r\n\t\tsetStopRecord(true);\r\n\t\twindow.str.getAudioTracks().forEach(function (track) {\r\n\t\t\ttrack.stop();\r\n\t\t});\r\n\t\twindow.str = null;\r\n\t}\r\n\r\n\tconst onData = recordedBlob => {\r\n\r\n\t};\r\n\r\n\tconst onStop = () => {\r\n\r\n\t};\r\n\r\n\r\n\r\n\tconst classes = useStyles();\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Grid container justifyContent=\"center\">\r\n\t\t\t\t<Grid item>\r\n\r\n\t\t\t\t\t{!record && stopRecord ?\r\n\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t<IconButton onClick={startRecording}>\r\n\t\t\t\t\t\t\t\t<MicIcon className={classes.icon} style={{ width: size, height: size }} />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<IconButton onClick={totallyStop}>\r\n\t\t\t\t\t\t\t<MicOffIcon className={classes.icon} style={{ width: size, height: size }} />\r\n\t\t\t\t\t\t</IconButton>}\r\n\r\n\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t\t<Card >\r\n\t\t\t\t<ReactMic\r\n\t\t\t\t\trecord={record}\r\n\t\t\t\t\tclassName={classes.reactmic}\r\n\t\t\t\t\tvisualSetting=\"frequencyBars\"\r\n\t\t\t\t\techoCancellation={true}\r\n\t\t\t\t\tnoiseSuppression={true}\r\n\t\t\t\t\tonStop={onStop}\r\n\t\t\t\t\tonData={onData}\r\n\t\t\t\t\tstrokeColor=\"green\"\r\n\t\t\t\t\tbackgroundColor=\"white\"\r\n\t\t\t\t/>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Grid container>\r\n\t\t\t\t\t\t<Grid item container justifyContent=\"center\" xs={12}>\r\n\t\t\t\t\t\t\t{!record && stopRecord && (\r\n\t\t\t\t\t\t\t\t<IconButton onClick={startRecording}>\r\n\t\t\t\t\t\t\t\t\t<FiberManualRecordIcon\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ color: red[500] }}\r\n\t\t\t\t\t\t\t\t\t\tclassName={classes.icon}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t{record && !stopRecord && (\r\n\t\t\t\t\t\t\t\t<IconButton onClick={totallyStop}>\r\n\t\t\t\t\t\t\t\t\t<StopIcon className={classes.icon} />\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\r\n\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Card>\r\n\t\t</>\r\n\t);\r\n}\r\n","import { createStore, combineReducers, applyMiddleware, compose } from 'redux'\r\nimport thunkMiddleware from 'redux-thunk'\r\n\r\nimport { appReducer } from './appReducer';\r\nimport { usersReducer } from './usersReducer';\r\n\r\n\r\nlet reducers = combineReducers(\r\n\t{\r\n\t\tapp: appReducer,\r\n\t\tusers: usersReducer\r\n\t}\r\n)\r\n\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(reducers, composeEnhancers(applyMiddleware(thunkMiddleware)));\r\n\r\nwindow.__store__ = store;\r\n\r\nexport default store;\r\n","export default __webpack_public_path__ + \"static/media/preloader.e40a641e.gif\";","import React from 'react'\r\nimport preloader from '../../../assets/src/preloader/preloader.gif'\r\n\r\n\r\nexport const Preloader = () => {\r\n\r\n\r\n\treturn (\r\n\t\t<div className=\"lds-facebook\">\r\n\t\t\t<div></div>\r\n\t\t\t<div></div>\r\n\t\t\t<div></div>\r\n\t\t</div>\r\n\t)\r\n}","export const routesTechPractices = [\r\n\t'/tecpractice1',\r\n\t'/tecpractice2',\r\n\t'/tecpractice3',\r\n\t'/tecpractice4',\r\n\t'/tecpractice5',\r\n\t'/tecpractice6'\r\n]\r\nexport const routesStands = [\r\n\t'/stand1',\r\n\t'/stand2',\r\n\t'/stand3',\r\n\t'/stand4',\r\n\t'/stand5',\r\n\t'/stand6',\r\n\t'/stand7',\r\n\t'/stand8',\r\n\t'/stand9',\r\n\t'/stand10',\r\n\t'/stand11',\r\n\t'/stand12',\r\n\t'/stand13',\r\n\t'/stand14',\r\n\t'/stand15',\r\n\t'/stand16',\r\n\t'/stand17',\r\n\t'/stand18',\r\n\t'/stand19',\r\n\t'/stand20',\r\n\t'/stand21',\r\n\t'/stand22',\r\n\t'/stand23'\r\n]","import * as React from 'react';\r\nimport Card from '@mui/material/Card';\r\nimport CardActions from '@mui/material/CardActions';\r\nimport CardContent from '@mui/material/CardContent';\r\nimport CardMedia from '@mui/material/CardMedia';\r\nimport Button from '@mui/material/Button';\r\nimport Typography from '@mui/material/Typography';\r\n\r\nexport const ScreenCapture = React.forwardRef((props, ref) => {\r\n\treturn (\r\n\r\n\t\t<video ref={ref} autoPlay height=\"400\" width='100%'></video>\r\n\r\n\r\n\t)\r\n})","import React, { useRef, useState } from 'react'\r\nimport Box from '@mui/material/Box';\r\nimport Drawer from '@mui/material/Drawer';\r\nimport AppBar from '@mui/material/AppBar';\r\nimport CssBaseline from '@mui/material/CssBaseline';\r\nimport Toolbar from '@mui/material/Toolbar';\r\nimport List from '@mui/material/List';\r\nimport Typography from '@mui/material/Typography';\r\nimport Divider from '@mui/material/Divider';\r\nimport ListItem from '@mui/material/ListItem';\r\nimport ListItemIcon from '@mui/material/ListItemIcon';\r\nimport ListItemText from '@mui/material/ListItemText';\r\nimport Collapse from '@mui/material/Collapse';\r\nimport ListItemButton from '@mui/material/ListItemButton';\r\nimport ExpandLess from '@mui/icons-material/ExpandLess';\r\nimport ExpandMore from '@mui/icons-material/ExpandMore';\r\nimport Button from '@mui/material/Button';\r\n\r\nimport InboxIcon from '@mui/icons-material/MoveToInbox';\r\nimport Microphone from '../microphone/Microphone';\r\nimport { Grid } from '@material-ui/core';\r\nimport VoiceChatIcon from '@mui/icons-material/VoiceChat';\r\nimport { routesTechPractices, routesStands } from './../../../utils/routes'\r\nimport './chatBar.css'\r\nimport { Switch, Route, NavLink } from 'react-router-dom'\r\nimport { ChatRoom1 } from './rooms/СhatRoom1';\r\nimport { СhatRoom2 } from './rooms/СhatRoom2';\r\nimport { СhatRoom3 } from './rooms/СhatRoom3';\r\nimport { СhatRoom4 } from './rooms/СhatRoom4';\r\nimport { useSelector } from 'react-redux';\r\nimport { Preloader } from '../preloader/Preloader';\r\nimport { ScreenCapture } from '../screenCapture/ScreenCapture';\r\n\r\nconst drawerWidth = 240;\r\nconst roomsTechPracticeNames = ['Техпрактика 1', 'Техпрактика 2', 'Техпрактика 3', 'Техпрактика 4 (Don\\'t)', 'Техпрактика 5', 'Техпрактика 6']\r\n\r\nvar displayMediaOptions = {\r\n\tvideo: {\r\n\t\tcursor: \"always\"\r\n\t},\r\n\taudio: false\r\n};\r\n\r\nexport const ChatBar = ({ getUsersFromStore }) => {\r\n\r\n\tconst [open, setOpen] = useState(true);\r\n\tconst [openSt, setOpenSt] = useState(false);\r\n\tconst screenCaptureRef = React.createRef();\r\n\tconst [srcLink, setSrcLink] = useState(null)\r\n\r\n\tasync function startCapture() {\r\n\t\ttry {\r\n\t\t\tlet videoTracks = screenCaptureRef.current\r\n\t\t\tvideoTracks.srcObject = await navigator.mediaDevices.getDisplayMedia(displayMediaOptions);\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(\"Error: \" + err);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction stopCapture() {\r\n\t\tlet tracks = screenCaptureRef.current.srcObject.getTracks();\r\n\r\n\t\ttracks.forEach(track => track.stop());\r\n\t\tscreenCaptureRef.current.srcObject = null;\r\n\t}\r\n\r\n\tconst handleClick = () => {\r\n\t\tsetOpen(!open);\r\n\t}\r\n\tconst handleClickSt = () => {\r\n\r\n\t\tsetOpenSt(!openSt);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Grid >\r\n\t\t\t<Box sx={{ display: 'flex' }}>\r\n\t\t\t\t<CssBaseline />\r\n\t\t\t\t<Drawer\r\n\t\t\t\t\tvariant=\"permanent\"\r\n\t\t\t\t\tsx={{\r\n\t\t\t\t\t\twidth: drawerWidth,\r\n\t\t\t\t\t\tflexShrink: 0,\r\n\t\t\t\t\t\t[`& .MuiDrawer-paper`]: { marginTop: '5em', width: drawerWidth, boxSizing: 'border-box' },\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Box sx={{ overflow: 'auto' }}>\r\n\t\t\t\t\t\t<List>\r\n\t\t\t\t\t\t\t<ListItemButton onClick={handleClick}>\r\n\t\t\t\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t\t\t\t<InboxIcon />\r\n\t\t\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t\t\t<ListItemText primary=\"Техпрактики\" />\r\n\t\t\t\t\t\t\t\t{open ? <ExpandLess /> : <ExpandMore />}\r\n\t\t\t\t\t\t\t</ListItemButton>\r\n\t\t\t\t\t\t\t<Collapse in={open} timeout=\"auto\" unmountOnExit>\r\n\t\t\t\t\t\t\t\t{roomsTechPracticeNames.map((text, index = 0) => (\r\n\t\t\t\t\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\t\t\t\t\tto={routesTechPractices[index]}\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ textDecoration: 'none', color: 'inherit', display: 'block' }}\r\n\t\t\t\t\t\t\t\t\t\tactiveClassName='activeLink'\r\n\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\texact>\r\n\t\t\t\t\t\t\t\t\t\t<ListItem button sx={{ pl: 4 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<VoiceChatIcon />\r\n\t\t\t\t\t\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t\t\t\t\t\t<ListItemText primary={text} />\r\n\t\t\t\t\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</Collapse>\r\n\r\n\t\t\t\t\t\t\t<Divider />\r\n\t\t\t\t\t\t\t<ListItemButton onClick={handleClickSt}>\r\n\t\t\t\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t\t\t\t<InboxIcon />\r\n\t\t\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t\t\t<ListItemText primary=\"Стенды\" />\r\n\t\t\t\t\t\t\t\t{openSt ? <ExpandLess /> : <ExpandMore />}\r\n\t\t\t\t\t\t\t</ListItemButton>\r\n\t\t\t\t\t\t\t<Collapse in={openSt} timeout=\"auto\" unmountOnExit>\r\n\t\t\t\t\t\t\t\t{routesStands.map((text, index = 0) => (\r\n\t\t\t\t\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\t\t\t\t\tto={routesStands[index]}\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ textDecoration: 'none', color: 'inherit', display: 'block' }}\r\n\t\t\t\t\t\t\t\t\t\tactiveClassName='activeLink'\r\n\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\texact>\r\n\t\t\t\t\t\t\t\t\t\t<ListItem button sx={{ pl: 4 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<VoiceChatIcon />\r\n\t\t\t\t\t\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t\t\t\t\t\t<ListItemText primary={text} />\r\n\t\t\t\t\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</Collapse>\r\n\t\t\t\t\t\t</List>\r\n\t\t\t\t\t\t<Divider />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Microphone size={'1.5em'} />\r\n\t\t\t\t</Drawer>\r\n\t\t\t\t<Box sx={{ width: 'calc(100% - 240px)', display: 'flex', flexDirection: 'column' }}>\r\n\t\t\t\t\t<Box sx={{ width: '100%', m: '1em auto', bgcolor: 'background.paper', display: 'flex', flexDirection: 'row' }}>\r\n\t\t\t\t\t\t<Box component=\"main\" sx={{ flexGrow: 1, p: 1 }}>\r\n\t\t\t\t\t\t\t<Microphone size={'2em'} />\r\n\t\t\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t\t\t{/* <Route exact path='/'> <Typography paragraph>Выберите комнату для чата слева</Typography></Route>\r\n\t\t\t\t\t\t<Route exact path='/room1' component={ChatRoom1} />\r\n\t\t\t\t\t\t<Route exact path='/room2' component={СhatRoom2} />\r\n\t\t\t\t\t\t<Route exact path='/room3' component={СhatRoom3} />\r\n\t\t\t\t\t\t<Route exact path='/room4' component={СhatRoom4} />\r\n\t\t\t\t\t\t<Route path='*' render={() => <div>There is no such chat room!</div>} /> */}\r\n\t\t\t\t\t\t\t</Switch>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box\r\n\t\t\t\t\t\t\tsx={{ marginTop: '2em', width: '100%', height: 200, maxWidth: 360, bgcolor: 'background.paper' }}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<List>\r\n\t\t\t\t\t\t\t\t<ListItemText primary={'Список пользователей'} />\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tgetUsersFromStore.length !== 0 ?\r\n\t\t\t\t\t\t\t\t\t\tgetUsersFromStore.map((user, index) =>\r\n\t\t\t\t\t\t\t\t\t\t(<ListItem key={index} component=\"div\" disablePadding>\r\n\t\t\t\t\t\t\t\t\t\t\t<ListItemButton>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<ListItemText primary={user.uuid} />\r\n\t\t\t\t\t\t\t\t\t\t\t</ListItemButton>\r\n\t\t\t\t\t\t\t\t\t\t</ListItem>))\r\n\t\t\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t\t\t<Preloader />\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</List>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Box>\r\n\r\n\t\t\t\t\t<Box sx={{ width: '100%', margin: '0 auto', bgcolor: 'background.paper', display: 'flex', flexDirection: 'row' }}>\r\n\t\t\t\t\t\t<Box sx={{ marginLeft: '.5em', display: 'flex', flexDirection: 'column', justifyContent: 'flex-start' }}>\r\n\t\t\t\t\t\t\t<Button sx={{ marginBottom: '1em' }} variant=\"outlined\" onClick={startCapture}>Начать трансляцию</Button>\r\n\t\t\t\t\t\t\t<Button variant=\"outlined\" onClick={stopCapture}>Закончить трансляцию</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<ScreenCapture ref={screenCaptureRef} srcLink={srcLink} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Box>\r\n\r\n\t\t\t</Box>\r\n\t\t</Grid>\r\n\t);\r\n}","import React, { useCallback, useState } from 'react'\r\nimport { Input } from '@mui/material';\r\nimport Box from '@mui/material/Box';\r\nimport Button from '@mui/material/Button';\r\nimport Stack from '@mui/material/Stack';\r\nimport { getWayConnection } from '../../socket/getWayConnect';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { mainRoot } from '../../socket/constants';\r\n\r\nexport const Main = ({ lobbyUUID, setLobbyUUID }) => {\r\n\r\n\tconst handleConnectToGetWay = useCallback(() => {\r\n\t\tgetWayConnection(lobbyUUID, 1);\r\n\t}, [lobbyUUID, setLobbyUUID])\r\n\r\n\tconst handleGetLobbyUUID = useCallback((e) => {\r\n\t\tsetLobbyUUID(e.target.value)\r\n\t}, [lobbyUUID, setLobbyUUID])\r\n\r\n\treturn (\r\n\t\t<Box sx={{ m: 2 }}>\r\n\t\t\t<Box sx={{ m: 2 }}>\r\n\t\t\t\t<Box sx={{ m: 1 }}>Нажми на кнопку, чтобы войти в общую говорилку</Box>\r\n\r\n\t\t\t\t<NavLink exact to={mainRoot + '/lobby'} style={{ textDecoration: 'none', color: 'inherit' }}>\r\n\t\t\t\t\t<Button variant=\"outlined\" /* onClick={handleConnectToGetWay} */>Войти в общее лобби</Button>\r\n\t\t\t\t</NavLink>\r\n\r\n\t\t\t</Box>\r\n\t\t\t<Box sx={{ marginTop: 20 }}>\r\n\t\t\t\t<Box sx={{ m: 2 }}>Введи ID, чтобы создать комнату или законнектиться в неё</Box>\r\n\r\n\t\t\t\t<Stack spacing={2} direction=\"row\" justifyContent='center'>\r\n\t\t\t\t\t<Input onChange={handleGetLobbyUUID} />\r\n\t\t\t\t\t<NavLink exact to={mainRoot + `/lobby/${lobbyUUID}`} style={{ textDecoration: 'none', color: 'inherit' }}>\r\n\t\t\t\t\t\t<Button variant=\"outlined\" onClick={handleConnectToGetWay}>Войти в стенд</Button>\r\n\t\t\t\t\t</NavLink>\r\n\t\t\t\t</Stack>\r\n\r\n\t\t\t</Box>\r\n\t\t</Box>\r\n\t)\r\n}","import { setLinkForSS, setSessionUserUUID } from '../redux/appReducer';\r\nimport store from '../redux/store'\r\nimport {\r\n\tgetWayWebSocket,\r\n\tToGetway_FromUnknown_AuthSocket,\r\n\tFromGetway_AuthSocket_Response,\r\n\tToGetway_FromPlayer_GetSoundServer,\r\n\tFromGetway_FromPlayer_GetSoundServerResponse\r\n} from \"./constants.js\";\r\n\r\n\r\nexport function getWayConnection(lobbyUUID = '', connectionType = 1) {\r\n\r\n\tconst newWS = new WebSocket(getWayWebSocket);\r\n\r\n\tconnect();\r\n\r\n\tfunction connect() {\r\n\t\tnewWS.onopen = () => {\r\n\t\t\tconsole.log('GetWay Socket connected');\r\n\t\t\tnewWS.send(JSON.stringify({ method: ToGetway_FromUnknown_AuthSocket, token: \"0e1e703b-059b-4d3d-b275-3fc36ea4e8c4\", type: connectionType }))\r\n\t\t}\r\n\t\tnewWS.onmessage = (data) => {\r\n\t\t\tlet dataFromGetWay = JSON.parse(data.data);\r\n\t\t\tconsole.log(dataFromGetWay);\r\n\r\n\t\t\tif (dataFromGetWay.method != undefined) {\r\n\t\t\t\tswitch (dataFromGetWay.method) {\r\n\r\n\t\t\t\t\tcase FromGetway_AuthSocket_Response:\r\n\t\t\t\t\t\tconsole.log(dataFromGetWay.user);\r\n\t\t\t\t\t\tstore.dispatch(setSessionUserUUID(dataFromGetWay.user.session_uuid, dataFromGetWay.user.user_uuid))\r\n\t\t\t\t\t\tnewWS.send(JSON.stringify({ method: ToGetway_FromPlayer_GetSoundServer, lobby_uuid: lobbyUUID }))\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase FromGetway_FromPlayer_GetSoundServerResponse:\r\n\t\t\t\t\t\tlet link = `wss://${dataFromGetWay.ip}:${dataFromGetWay.port}`;\r\n\t\t\t\t\t\tstore.dispatch(setLinkForSS(link))\r\n\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tconsole.log('Unexpected method');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tnewWS.onclose = () => {\r\n\t\t\tconsole.log('GetWay websocket closed. trying to reconnect...');\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tconnect()\r\n\t\t\t}, 1000);\r\n\t\t}\r\n\t}\r\n}\r\n","import { useCallback, useContext, useEffect, useMemo, useState } from 'react';\nimport './App.css';\nimport { NavBar } from \"./components/common/navbar/NavBar\";\nimport Microphone from \"./components/common/microphone/Microphone\";\nimport { Switch, Route, Redirect } from 'react-router-dom'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { getWayConnection } from './components/socket/getWayConnect';\nimport { sendPlayerTick } from './components/socket/serverConnection';\nimport { Preloader } from './components/common/preloader/Preloader'\nimport { getWayWebSocket, mainRoot } from './components/socket/constants';\nimport { WSSSContext } from './utils/Context';\nimport { setLinkForSS, setSessionUserUUID } from './components/redux/appReducer';\nimport { chatRoom1 } from './components/common/chatRooms/rooms/СhatRoom1';\nimport { ChatBar } from './components/common/chatRooms/chatBar';\nimport { Main } from './components/common/main/Main'\n\nfunction App() {\n\n  const dispatch = useDispatch();\n\n  const [loadinglink, setLoaded] = useState(false);\n\n  const [contextWSSS, setContextWSSS] = useState({\n    linkForSS: '',\n    sessionTokenForSS: '',\n    userUUIDForSS: '',\n    type: ''\n  })\n\n  const [lobbyUUID, setLobbyUUID] = useState('');\n\n  //get initial data for SS\n  const linkIsFetched = useSelector(state => state.app.linkIsFetched)\n  const linkForSS = useSelector(state => state.app.linkForSS)\n  const sessionTokenForSS = useSelector(state => state.app.sessionToken)\n  const userUUIDForSS = useSelector(state => state.app.userUUID)\n  const getConnectionType = useSelector(state => state.app.type)\n\n  //get users from store\n  const getUsersFromStore = useSelector(state => state.users.users)\n\n\n  useMemo(() => {\n    dispatch(setLinkForSS);\n    dispatch(setSessionUserUUID);\n    setContextWSSS({ linkForSS, sessionTokenForSS, userUUIDForSS, getConnectionType })\n\n  }, [linkForSS, sessionTokenForSS, userUUIDForSS, getConnectionType])\n\n  // useEffect(() => {\n  //   getWayConnection()\n  // }, [])\n\n\n  useMemo(() => {\n    setLoaded(linkIsFetched)\n  }, [linkIsFetched]);\n\n\n\n\n  return (\n    <WSSSContext.Provider value={contextWSSS}>\n      <div className=\"home\" style={{ textAlign: \"center\" }}>\n\n        <NavBar getUsersFromStore={getUsersFromStore} />\n        <Switch>\n\n          <Route exact path={mainRoot} render={() => <Main lobbyUUID={lobbyUUID} setLobbyUUID={setLobbyUUID} />} />\n          <Route exact path={mainRoot + `/lobby/${lobbyUUID}`} render={() => <ChatBar getUsersFromStore={getUsersFromStore} />} />\n\n          <Route path='*'\n            render={() => <div> 404 Page not found!</div>} />\n        </Switch>\n\n      </div>\n    </WSSSContext.Provider >\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { BrowserRouter } from 'react-router-dom'\nimport reportWebVitals from './reportWebVitals';\nimport { Provider } from 'react-redux';\nimport store from './components/redux/store'\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <Provider store={store}>\n        <App />\n      </Provider>\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}